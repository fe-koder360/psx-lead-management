document.addEventListener("click", function (e) {
    if (e.target.closest(".addBtn")) {
        e.preventDefault();

        let btn = e.target.closest(".addBtn");
        let currentRow = btn.closest(".section-body");
        let wrapper = document.getElementById("commentsWrapper");

        // Agar button pehle plus hai to row clone karo
        if (btn.querySelector("i").classList.contains("fa-plus")) {
            let clone = currentRow.cloneNode(true);

            // Naye row ka button minus me change
            let newBtn = clone.querySelector(".addBtn i");
            newBtn.classList.remove("fa-plus");
            newBtn.classList.add("fa-minus");

            // Inputs clear karo
            clone.querySelectorAll("input, textarea").forEach(el => el.value = "");

            wrapper.appendChild(clone);
        }
        // Agar button minus hai to row delete karo
        else if (btn.querySelector("i").classList.contains("fa-minus")) {
            currentRow.remove();
        }
    }
});

$(document).ready(function () {
    let table = $('#leadsTable').DataTable({
        scrollX: true,
        scrollCollapse: true,
        paging: true,
        autoWidth: false,
        pageLength: 10,
        order: [
            [1, "desc"]
        ],
        columnDefs: [{
                orderable: false,
                targets: 0
            } // checkbox column sortable na ho
        ]
    });

    // ✅ Select All checkbox
    $('#selectAll').on('click', function () {
        $('.rowCheckbox').prop('checked', this.checked);
    });

    // ✅ Row checkbox logic
    $(document).on('click', '.rowCheckbox', function () {
        $('#selectAll').prop(
            'checked',
            $('.rowCheckbox:checked').length === $('.rowCheckbox').length
        );
    });

    
});