document.addEventListener("click", function (e) {
    if (e.target.closest(".addBtn")) {
        e.preventDefault();

        let btn = e.target.closest(".addBtn");
        let currentRow = btn.closest(".section-body");
        let wrapper = document.getElementById("commentsWrapper");

        // Agar button pehle plus hai to row clone karo
        if (btn.querySelector("i").classList.contains("fa-plus")) {
            let clone = currentRow.cloneNode(true);

            // Naye row ka button minus me change
            let newBtn = clone.querySelector(".addBtn i");
            newBtn.classList.remove("fa-plus");
            newBtn.classList.add("fa-minus");

            // Inputs clear karo
            clone.querySelectorAll("input, textarea").forEach(el => el.value = "");

            wrapper.appendChild(clone);
        }
        // Agar button minus hai to row delete karo
        else if (btn.querySelector("i").classList.contains("fa-minus")) {
            currentRow.remove();
        }
    }
});

$(document).ready(function () {
    let table = $('#leadsTable').DataTable({
        scrollX: true,
        scrollCollapse: true,
        paging: true,
        autoWidth: false,
        pageLength: 10,
        order: [
            [1, "desc"]
        ],
        columnDefs: [{
                orderable: false,
                targets: 0
            } // checkbox column sortable na ho
        ]
    });

    // ✅ Select All checkbox
    $('#selectAll').on('click', function () {
        $('.rowCheckbox').prop('checked', this.checked);
    });

    // ✅ Row checkbox logic
    $(document).on('click', '.rowCheckbox', function () {
        $('#selectAll').prop(
            'checked',
            $('.rowCheckbox:checked').length === $('.rowCheckbox').length
        );
    });
});

document.querySelectorAll("a").forEach((a) => {
    let href = a.getAttribute("href");
    a.href = href ?
        href.startsWith("#") && href.endsWith("#") ?
        href.replace("#", "javascript:void(0)") :
        href :
        "javascript:void(0)";
});

document.addEventListener("DOMContentLoaded", function () {
    const menuBtn = document.getElementById("menuBtn");
    const mainContent = document.querySelector(".main-content");
    const sidebar = document.querySelector(".sidebar");

    function handleResponsive() {
        if (window.innerWidth <= 1199) {
            mainContent.classList.add("active"); // hamesha active
            sidebar.classList.add("active"); // optional, default visible
        } else {
            mainContent.classList.remove("active");
            sidebar.classList.remove("active");
        }
    }

    // Run on load
    handleResponsive();

    // Run on resize
    window.addEventListener("resize", handleResponsive);

    // Menu toggle click
    menuBtn.addEventListener("click", function (e) {
        e.preventDefault();
        if (window.innerWidth <= 1199) {
            // small screen → only sidebar toggle
            sidebar.classList.toggle("active");
        } else {
            // large screen → both toggle
            mainContent.classList.toggle("active");
            sidebar.classList.toggle("active");
        }
    });
});
